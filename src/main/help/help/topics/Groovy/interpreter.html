<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>
  <HEAD>
    <META name="generator" content=
    "HTML Tidy for Java (vers. 2009-12-01), see jtidy.sourceforge.net">
    <META http-equiv="Content-Language" content="en-us">
    <META http-equiv="Content-Type" content="text/html; charset=windows-1252">
    <META name="GENERATOR" content="Microsoft FrontPage 4.0">
    <META name="ProgId" content="FrontPage.Editor.Document">

    <TITLE>Groovy Interpreter</TITLE>
    <LINK rel="stylesheet" type="text/css" href="../../shared/Frontpage.css">
  </HEAD>

  <BODY>
    <H1><a name="Groovy"></a>Groovy Interpreter</H1>

    <P>
    Ruby Dragon adds interactive Groovy shells to Ghidra, and also
    allows scripts to be written in Groovy with full access to all of
    Ghidra's functionality.
    </P>

    <H2>Environment</H2>
    <BLOCKQUOTE>
    <P>
    The Groovy interactive interpreter runs as a simple REPL.

    The same variables that are available in Ghidra's native Java and Python
    environments are also available in the Groovy interpreter as global
    variables, both for interactive sessions and scripts:
    </P>

    <PRE>
    currentAddress
    currentHighlight
    currentLocation
    currentProgram
    currentSelection
    </PRE>

    <P>
    In the interactive interpreter, there is also another variable named
    currentAPI, which has an instance of FlatProgramAPI for the current
    program. This can be used to access the convenience functions provided by
    the flat API.
    </P>

    <P>
    If you're writing a script, you'll also be able to access the GroovyScript
    instance (a subclass of GhidraScript) using the script variable binding.
    This will provide access to all public fields and methods for the
    instance. There are examples of this in the GhidraBasicsScriptGroovy script
    included in the Examples category with this plugin.
    </P>
    </BLOCKQUOTE>

    <H2>Headless Analysis</H2>
    <BLOCKQUOTE>
    <P>
    Groovy scripts may also be run during headless analysis. The following
    invocation uses one of the Groovy example scripts to save all strings found
    in a demo executable to a file named example_file_strings.txt.
    </P>

    <PRE>
    support\analyzeHeadless ^
        my\ghidra\projects DummyProject ^
        -import demo_binary.exe ^
        -postScript SaveStringsScriptGroovy.groovy example_file_strings.txt ^
        -deleteProject
    </PRE>
    </BLOCKQUOTE>

    <H2>Copy/Paste</H2>
    <BLOCKQUOTE>
    <P>
    Copy and paste from within the Groovy interpreter should work as expected
    for your given environment:
    <UL>
      <LI><B>Windows:</B>&nbsp;&nbsp;CTRL+C / CTRL+V</LI>
      <LI><B>Linux:</B>&nbsp;&nbsp;CTRL+C / CTRL+V</LI>
      <LI><B>OS X:</B>&nbsp;&nbsp;COMMAND+C / COMMAND+V</LI>
    </UL>
    </P>
    </BLOCKQUOTE>

    <H2><A name="Clear_Groovy_Interpreter"></A>Clear <IMG border="0" src="images/erase16.png"></H2>
    <BLOCKQUOTE>
    <P>
    This command clears the interpreter's display.  Its effect is purely visual.
    It does not affect the state of the interpreter in any way.
    </P>
    </BLOCKQUOTE>

    <H2><A name="Reset_Groovy_Interpreter"></A>Reset <IMG border="0" src="images/reload3.png"></H2>
    <BLOCKQUOTE>
    <P>
    This command resets the interpreter, which clears the display and resets all state.
    </P>
    </BLOCKQUOTE>

    <H2><A name="Import_Classes_In_Groovy_Interpreter"></A>Import Classes Option</H2>
    <BLOCKQUOTE>
    <P>
    When this option is set to true, a number of Ghidra classes are
    imported in the Groovy interactive interpreter automatically. This is
    particularly useful when using snippets copied from other sources or
    scripts, so that import statements are not needed to have access to Ghidra
    classes.
    </P>

    <P>
    The list of classes (and their containing packages) is in a data file
    included in this extension's data folder named <I>preload.xml</I>. If you
    wish to add or remove classes from this list, edit this file and reset the
    interpeter. Note that changes to this file will affect the classes imported
    by <B>all</B> Ruby Dragon interpreters, not just Groovy.
    </P>
    </BLOCKQUOTE>

    <P align="left" class="providedbyplugin">Provided by: <I>GroovyDragon</I></P>
  </BODY>
</HTML>
